{"version":3,"sources":["AdvancedSearchForm.js","LogsTable.js","App.js","serviceWorker.js","index.js"],"names":["AdvancedSearchForm","props","console","log","state","expand","searchSql","project","env","module","category","sub_category","logLevel","filter1","filter2","ip","beginTime","endTime","projectList","envList","ipList","moduleList","categoryOptions","endOpen","handleSearch","e","preventDefault","reprot","handleReset","resetData","toggle","setState","disabledStartDate","endtime","valueOf","disabledEndDate","onStartChange","value","onEndChange","handleStartOpenChange","open","handleEndOpenChange","onChange","es_index","this","begin","Date","getFullYear","getMonth","ss","String","length","getDate","dd","getES_index","reqwest","url","method","data","JSON","stringify","type","contentType","then","aggregations","group_by_project","buckets","map","m","key","getenv","getIp","getModule","message","warning","catch","error","selectedOptions","targetOption","loading","req","label","children","isLeaf","Option","push","span","Item","showSearch","style","width","placeholder","optionFilterProp","v","changeFiled","allowClear","className","disabledDate","showTime","format","onOpenChange","a","onChangeModule","options","loadData","getCategory","bind","onCategoryChange","changeOnSelect","defaultValue","display","mode","name","inputChange","filed","event","target","getFirstCategory","initProject","onSubmit","labelCol","gutter","getFields","textAlign","htmlType","marginLeft","onClick","fontSize","Component","LogsTable","handleCancel","visible","handleTableChange","pagination","filters","sorter","pager","current","getData","dataSource","detailInfo","currentPage","range","undefined","addtime","gte","lte","term","forEach","element","query","bool","filter","hits","total","title","dataIndex","render","text","record","openrDetail","slice","_source","fmt","date","ret","opt","toString","getHours","getMinutes","getSeconds","k","RegExp","exec","replace","padStart","dateFormat","tag","color","bordered","msg","extra","columns","bookTitle","rowKey","_id","onCancel","footer","bindDetail","WrappedAdvancedSearchForm","create","App","searchKey","n","onSearchChange","Math","ceil","random","Boolean","window","location","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.501f83f0.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport { Form, Row, Col, Input, Button, Icon, message, Select, Cascader } from 'antd';\nimport './AdvancedSearchForm.css';\nimport reqwest from 'reqwest';\nimport { DatePicker } from 'antd';\n\nclass AdvancedSearchForm extends Component {\n    constructor(props) {\n        console.log(\"search rander\")\n        super(props);\n        this.reprot = props.onChange\n    }\n    state = {\n        expand: false,\n        searchSql: {\n            project: \"\",\n            env: \"\",\n            module: \"\",\n            category: \"\",\n            sub_category: \"\",\n            logLevel: \"\",\n            filter1: \"\",\n            filter2: \"\",\n            ip: \"\",\n            beginTime: null,\n            endTime: null,\n        },\n        projectList: [],\n        envList: [],\n        ipList: [],\n        moduleList: [],\n        categoryOptions: [\n        ],\n        endOpen: false\n    };\n\n    getES_index() {\n        let es_index = \"aiologs\"  //定位es的索引\n        if (this.state.searchSql.beginTime && this.state.searchSql.endTime) {\n            // 如果选择了时间，则根据时间定位默认查询一个月内的数据\n            const begin = new Date(this.state.searchSql.beginTime)\n            const endTime = new Date(this.state.searchSql.endTime)\n            if (begin.getFullYear() === endTime.getFullYear()) {\n                es_index += `-${begin.getFullYear()}.`\n                if (begin.getMonth() === endTime.getMonth()) {\n                    const ss = String(begin.getMonth() + 1)\n                    es_index += `${ss.length > 1 ? ss : (\"0\" + ss)}.`\n                    if (begin.getDate() === endTime.getDate()) {\n                        const dd = String(begin.getDate())\n                        es_index += `${dd.length > 1 ? dd : (\"0\" + dd)}`\n                    }\n                    else {\n                        es_index += '*'\n                    }\n                } else {\n                    es_index += '*'\n                }\n            } else {\n                es_index += '*'\n            }\n        }\n        else if (this.state.searchSql.beginTime) {\n            const begin = new Date(this.state.searchSql.beginTime)\n            const ss = String(begin.getMonth() + 1)\n            const dd = String(begin.getDate())\n            es_index += `-${begin.getFullYear()}.${ss.length > 1 ? ss : (\"0\" + ss)}.${dd.length > 1 ? dd : (\"0\" + dd)}`\n        }\n        else if (this.state.endTime) {\n            const endTime = new Date(this.state.searchSql.endTime)\n            const ss = String(endTime.getMonth() + 1)\n            const dd = String(endTime.getDate())\n            es_index += `-${this.state.endTime.getFullYear()}.${ss.length > 1 ? ss : (\"0\" + ss)}.${dd.length > 1 ? dd : (\"0\" + dd)}`\n        }\n        else {\n            es_index += '*'\n        }\n        return es_index\n    }\n\n    initProject() {\n        const req = {\n            \"size\": 0,\n            \"aggs\": {\n                \"group_by_project\": {\n                    \"terms\": {\n                        \"field\": \"project\"\n                    }\n                }\n            }\n        }\n        let es_index = this.getES_index()  //定位es的索引\n        reqwest({\n            url: `/${es_index}/_search/`,\n            method: 'post',\n            data: JSON.stringify(req),\n            type: 'json',\n            contentType: 'application/json'\n        }).then(data => {\n            if (data.aggregations) {\n                if (data.aggregations.group_by_project) {\n                    if (data.aggregations.group_by_project.buckets && data.aggregations.group_by_project.buckets.length > 0) {\n                        let projectList = data.aggregations.group_by_project.buckets.map(m => ({ \"key\": m.key }))\n                        this.setState({\n                            projectList\n                        })\n                        this.getenv(es_index);\n                        this.getIp(es_index);\n                        this.getModule(es_index);\n                        return\n                    }\n                }\n            }\n            message.warning('没有查到项目数据');\n        }).catch(() => {\n            this.setState({\n                projectList:[]\n            })\n            message.error('接口跪了~~~~(>_<)~~~~');\n        });\n    }\n\n    getenv(es_index) {\n        const req = {\n            \"size\": 0,\n            \"aggs\": {\n                \"group_by_project\": {\n                    \"terms\": {\n                        \"field\": \"env\"\n                    }\n                }\n            }\n        }\n        reqwest({\n            url: `/${es_index}/_search/`,\n            method: 'post',\n            data: JSON.stringify(req),\n            type: 'json',\n            contentType: 'application/json'\n        }).then(data => {\n            if (data.aggregations) {\n                if (data.aggregations.group_by_project) {\n                    if (data.aggregations.group_by_project.buckets && data.aggregations.group_by_project.buckets.length > 0) {\n                        let envList = data.aggregations.group_by_project.buckets.map(m => ({ \"key\": m.key }))\n                        this.setState({\n                            envList\n                        })\n                        return\n                    }\n                }\n            }\n            message.warning('没有查到环境数据');\n        }).catch(() => {\n            message.error('接口跪了~~~~(>_<)~~~~');\n        });\n    }\n\n    getIp(es_index) {\n        const req = {\n            \"size\": 0,\n            \"aggs\": {\n                \"group_by_project\": {\n                    \"terms\": {\n                        \"field\": \"ip\"\n                    }\n                }\n            }\n        }\n        reqwest({\n            url: `/${es_index}/_search/`,\n            method: 'post',\n            data: JSON.stringify(req),\n            type: 'json',\n            contentType: 'application/json'\n        }).then(data => {\n            if (data.aggregations) {\n                if (data.aggregations.group_by_project) {\n                    if (data.aggregations.group_by_project.buckets && data.aggregations.group_by_project.buckets.length > 0) {\n                        let ipList = data.aggregations.group_by_project.buckets.map(m => ({ \"key\": m.key }))\n                        this.setState({\n                            ipList\n                        })\n                        return\n                    }\n                }\n            }\n            message.warning('没有查到环境数据');\n        }).catch(() => {\n            message.error('接口跪了~~~~(>_<)~~~~');\n        });\n    }\n\n    getModule(es_index) {\n        const req = {\n            \"size\": 0,\n            \"aggs\": {\n                \"group_by_project\": {\n                    \"terms\": {\n                        \"field\": \"module\"\n                    }\n                }\n            }\n        }\n        reqwest({\n            url: `/${es_index}/_search/`,\n            method: 'post',\n            data: JSON.stringify(req),\n            type: 'json',\n            contentType: 'application/json'\n        }).then(data => {\n            if (data.aggregations) {\n                if (data.aggregations.group_by_project) {\n                    if (data.aggregations.group_by_project.buckets && data.aggregations.group_by_project.buckets.length > 0) {\n                        let moduleList = data.aggregations.group_by_project.buckets.map(m => ({ \"key\": m.key }))\n                        this.setState({\n                            moduleList\n                        })\n                        return\n                    }\n                }\n            }\n            message.warning('没有查到环境数据');\n        }).catch(() => {\n            message.error('接口跪了~~~~(>_<)~~~~');\n        });\n    }\n\n    getCategory(selectedOptions) {\n        const targetOption = selectedOptions[selectedOptions.length - 1];\n        targetOption.loading = true;\n        const req = {\n            \"size\": 0,\n            \"aggs\": {\n                \"group_by_project\": {\n                    \"terms\": {\n                        \"field\": \"sub_category\"\n                    }\n                }\n            },\n            \"query\": {\n                \"bool\": {\n                    \"filter\": {\n                        \"term\": { \"category\": targetOption.label }\n                    }\n                }\n            }\n        }\n\n        let es_index = this.getES_index()  //定位es的索引\n        reqwest({\n            url: `/${es_index}/_search/`,\n            method: 'post',\n            data: JSON.stringify(req),\n            type: 'json',\n            contentType: 'application/json'\n        }).then(data => {\n            if (data.aggregations) {\n                if (data.aggregations.group_by_project) {\n                    if (data.aggregations.group_by_project.buckets && data.aggregations.group_by_project.buckets.length > 0) {\n                        targetOption.loading = false;\n                        targetOption.children = data.aggregations.group_by_project.buckets.map(m => ({\n                            value: m.key,\n                            label: m.key\n                        }))\n\n                        this.setState({\n                            categoryOptions: [...this.state.categoryOptions]\n                        })\n                        return\n                    }\n                }\n            }\n            message.warning('没有查到环境数据');\n        }).catch(() => {\n            message.error('接口跪了~~~~(>_<)~~~~');\n        });\n    }\n\n    getFirstCategory(value) {\n        const req = {\n            \"size\": 0,\n            \"aggs\": {\n                \"group_by_project\": {\n                    \"terms\": {\n                        \"field\": \"category\"\n                    }\n                }\n            },\n            \"query\": {\n                \"bool\": {\n                    \"filter\": {\n                        \"term\": { \"module\": value }\n                    }\n                }\n            }\n        }\n\n        let es_index = this.getES_index()  //定位es的索引\n        reqwest({\n            url: `/${es_index}/_search/`,\n            method: 'post',\n            data: JSON.stringify(req),\n            type: 'json',\n            contentType: 'application/json'\n        }).then(data => {\n            if (data.aggregations) {\n                if (data.aggregations.group_by_project) {\n                    if (data.aggregations.group_by_project.buckets && data.aggregations.group_by_project.buckets.length > 0) {\n                        let categoryOptions = data.aggregations.group_by_project.buckets.map(m => ({\n                            value: m.key,\n                            label: m.key,\n                            isLeaf: false,\n                        }))\n                        this.setState({\n                            categoryOptions\n                        })\n                        return\n                    }\n                }\n            }\n            message.warning('没有查到环境数据');\n        }).catch(() => {\n            message.error('接口跪了~~~~(>_<)~~~~');\n        });\n    }\n\n    // To generate mock Form.Item\n    getFields() {\n        const expand = this.state.expand;\n        const { Option } = Select;\n        // const { getFieldDecorator } = this.props.form;\n        const { endOpen, projectList, envList, ipList, moduleList } = this.state;\n        const { beginTime, endTime } = this.state.searchSql;\n        const children = [];\n        children.push(\n            <Col span={8} key={1} >\n                <Form.Item label={'项目标识'}>\n                    <Select\n                        showSearch\n                        style={{ width: \"100%\" }}\n                        placeholder=\"选择一个项目\"\n                        optionFilterProp=\"children\"\n                        onChange={v => this.changeFiled(v, 'project')}\n                        allowClear\n                    >\n                        {projectList ? projectList.map(m => (\n                            <Option value={m.key} key={m.key}>{m.key}</Option>\n                        )) : []}\n                    </Select>\n                </Form.Item>\n            </Col>,\n        );\n        children.push(\n            <Col span={8} key={7} >\n                <Form.Item label={'时间'}>\n                    <div>\n                        <DatePicker className=\"datetime-pickup-size\"\n                            disabledDate={this.disabledStartDate}\n                            showTime\n                            format=\"YYYY-MM-DD HH:mm:ss\"\n                            value={beginTime}\n                            placeholder=\"开始时间\"\n                            onChange={this.onStartChange}\n                            onOpenChange={this.handleStartOpenChange}\n                            allowClear\n                        />\n                        <DatePicker\n                            className=\"datetime-pickup-size\"\n                            disabledDate={this.disabledEndDate}\n                            showTime\n                            format=\"YYYY-MM-DD HH:mm:ss\"\n                            value={endTime}\n                            placeholder=\"结束时间\"\n                            onChange={this.onEndChange}\n                            open={endOpen}\n                            onOpenChange={this.handleEndOpenChange}\n                            allowClear\n                        />\n                    </div>\n                </Form.Item>\n            </Col>,\n        );\n        children.push(\n            <Col span={8} key={3}>\n                <Form.Item label={'错误类型'}>\n                    <Select style={{ width: \"100%\" }} onChange={(a) => this.changeFiled(a, \"logLevel\")} placeholder=\"可选\" allowClear>\n                        <Option value=\"INFO\" >INFO</Option>\n                        <Option value=\"WARNING\" >WARNING</Option>\n                        <Option value=\"ERROR\" >ERROR</Option>\n                        <Option value=\"CRITICAL\" >CRITICAL</Option>\n                        <Option value=\"DEBUG\">DEBUG</Option>\n                    </Select>\n                </Form.Item>\n            </Col>,\n        );\n        children.push(\n            <Col span={8} key={4}>\n                <Form.Item label={'模块'}>\n                    <Select style={{ width: \"100%\" }} onChange={(a) => this.onChangeModule(a)} placeholder=\"可选\" allowClear>\n                        {moduleList ? moduleList.map(m => (\n                            <Option value={m.key} key={m.key}>{m.key}</Option>\n                        )) : []}\n                    </Select>\n                </Form.Item>\n            </Col>,\n        );\n        children.push(\n            <Col span={8} key={5}>\n                <Form.Item label={'分类'}>\n                    <Cascader\n                        options={this.state.categoryOptions}\n                        loadData={this.getCategory.bind(this)}\n                        onChange={this.onCategoryChange.bind(this)}\n                        changeOnSelect\n                        placeholder=\"可选\"\n                    />\n                </Form.Item>\n            </Col>,\n        );\n        children.push(\n            <Col span={8} key={2}>\n                <Form.Item label={'环境'}>\n                    <Select defaultValue=\"product\" style={{ width: \"100%\" }} onChange={(a) => this.changeFiled(a, \"env\")} placeholder=\"可选\" allowClear>\n                        {envList ? envList.map(m => (\n                            <Option value={m.key} key={m.key}>{m.key}</Option>\n                        )) : []}\n                    </Select>\n                </Form.Item>\n            </Col>,\n        );\n        children.push(\n            <Col span={8} key={8} style={{ display: expand ? 'block' : 'none' }}>\n                <Form.Item label={'ip'} >\n                    <Select mode=\"multiple\" style={{ width: \"100%\" }} onChange={(a) => this.changeFiled(a, \"env\")} placeholder=\"可选\" allowClear>\n                        {ipList ? ipList.map(m => (\n                            <Option value={m.key} key={m.key}>{m.key}</Option>\n                        )) : []}\n                    </Select>\n                </Form.Item>\n            </Col>,\n        );\n        children.push(\n            <Col span={8} key={9} style={{ display: expand ? 'block' : 'none' }}>\n                <Form.Item label={'过滤条件1'}>\n                    <Input placeholder=\"可填\" name=\"filter1\" onChange={this.inputChange.bind(this)} allowClear />\n                </Form.Item>\n            </Col>,\n        );\n        children.push(\n            <Col span={8} key={10} style={{ display: expand ? 'block' : 'none' }}>\n                <Form.Item label={'过滤条件2'}>\n                    <Input placeholder=\"可填\" name=\"filter2\" onChange={this.inputChange.bind(this)} allowClear />\n                </Form.Item>\n            </Col>,\n        );\n        // for (let i = 0; i < 10; i++) {\n        //     children.push(\n        //         <Col span={8} key={i} style={{ display: i < count ? 'block' : 'none' }}>\n        //             <Form.Item label={`Field ${i}`}>\n        //                 {getFieldDecorator(`field-${i}`, {\n        //                     rules: [\n        //                         {\n        //                             required: true,\n        //                             message: 'Input something!',\n        //                         },\n        //                     ],\n        //                 })(<Input placeholder=\"placeholder\" />)}\n        //             </Form.Item>\n        //         </Col>,\n        //     );\n        // }\n        return children;\n    }\n\n    changeFiled(value, filed) {\n        const searchSql = { ...this.state.searchSql }\n        searchSql[filed] = value\n        this.setState({\n            searchSql\n        })\n    }\n\n    inputChange(event) {\n        const target = event.target;\n        const name = target.name;\n        this.changeFiled(target.value, name)\n    }\n\n    onChangeModule(value) {\n        this.changeFiled(value, \"module\");\n        if (value && value.length > 0) {\n            this.getFirstCategory(value);\n        }else{\n            this.setState({\n                categoryOptions:[]\n            })\n        }\n    }\n\n    onCategoryChange(value, selectedOptions) {\n        if (value.length===0){\n            this.changeFiled(\"\", \"category\");\n            this.changeFiled(\"\", \"sub_category\");\n        }\n        if (value.length === 1) {\n            this.changeFiled(value[0], \"category\");\n            this.changeFiled(\"\", \"sub_category\");\n        }\n        if (value.length > 1) {\n            this.changeFiled(value[0], \"category\");\n            this.changeFiled(value[1], \"sub_category\");\n        }\n    }\n\n    handleSearch = e => {\n        e.preventDefault();\n        this.reprot(this.state.searchSql)\n    };\n\n    handleReset = () => {\n        const resetData={\n            expand: this.state.expand,\n            searchSql: {\n                project: \"\",\n                env: \"\",\n                module: \"\",\n                category: \"\",\n                sub_category: \"\",\n                logLevel: \"\",\n                filter1: \"\",\n                filter2: \"\",\n                ip: \"\",\n                beginTime: null,\n                endTime: null,\n            },\n            projectList: [],\n            envList: [],\n            ipList: [],\n            moduleList: [],\n            categoryOptions: [\n            ],\n            endOpen: false\n        }\n        this.reprot(resetData,1)\n    };\n\n    toggle = () => {\n        const { expand } = this.state;\n        this.setState({ expand: !expand });\n    };\n\n    disabledStartDate = beginTime => {\n        const { endtime } = this.state.searchSql;\n        if (!beginTime || !endtime) {\n            return false;\n        }\n        return beginTime.valueOf() > endtime.valueOf();\n    };\n\n    disabledEndDate = endtime => {\n        const { beginTime } = this.state.searchSql;\n        if (!endtime || !beginTime) {\n            return false;\n        }\n        return endtime.valueOf() <= beginTime.valueOf();\n    };\n\n    onStartChange = value => {\n        const searchSql = { ...this.state.searchSql }\n        searchSql.beginTime = value\n        this.setState({\n            searchSql\n        });\n        // this.initProject()\n    };\n\n    onEndChange = value => {\n        const searchSql = { ...this.state.searchSql }\n        searchSql.endTime = value\n        this.setState({\n            searchSql\n        });\n        // this.initProject()\n    };\n\n    handleStartOpenChange = open => {\n        if (!open) {\n            this.setState({ endOpen: true });\n        }\n    };\n\n    handleEndOpenChange = open => {\n        this.setState({ endOpen: open });\n    };\n    componentDidMount() {\n        this.initProject();\n    };\n    render() {\n        return (\n            <Form className=\"ant-advanced-search-form\" onSubmit={this.handleSearch} labelCol={{ span: 3 }}>\n                <Row gutter={24}>{this.getFields()}</Row>\n                <Row>\n                    <Col span={24} style={{ textAlign: 'right' }}>\n                        <Button type=\"primary\" htmlType=\"submit\">\n                            查询\n                </Button>\n                        <Button style={{ marginLeft: 8 }} onClick={this.handleReset}>\n                            清除\n                </Button>\n                        <Button type=\"link\" style={{ marginLeft: 8, fontSize: 12 }} onClick={this.toggle}>\n                            折叠 <Icon type={this.state.expand ? 'up' : 'down'} />\n                        </Button>\n                    </Col>\n                </Row>\n            </Form>\n        )\n    }\n}\n\nexport default AdvancedSearchForm;","import React, { Component } from 'react';\nimport { Table, message, Tag, Modal, Descriptions,Button } from 'antd';\nimport reqwest from 'reqwest';\n// import './AdvancedSearchForm.css';\n\nfunction dateFormat(fmt, date) {\n    let ret;\n    let opt = {\n        \"Y+\": date.getFullYear().toString(),        // 年\n        \"m+\": (date.getMonth() + 1).toString(),     // 月\n        \"d+\": date.getDate().toString(),            // 日\n        \"H+\": date.getHours().toString(),           // 时\n        \"M+\": date.getMinutes().toString(),         // 分\n        \"S+\": date.getSeconds().toString()          // 秒\n        // 有其他格式化字符需求可以继续添加，必须转化成字符串\n    };\n    for (let k in opt) {\n        ret = new RegExp(\"(\" + k + \")\").exec(fmt);\n        if (ret) {\n            fmt = fmt.replace(ret[1], (ret[1].length === 1) ? (opt[k]) : (opt[k].padStart(ret[1].length, \"0\")))\n        };\n    };\n    return fmt;\n}\n\nclass LogsTable extends Component {\n    constructor(props) {\n        console.log(\"table rander\")\n        super(props);\n        // this.state =props.dataSource\n        this.state = {\n            ...props.dataSource,\n            pagination: {\n                \"current\": 1,\n                \"pageSize\": 10,\n                \"total\": 0\n            },\n            loading: false,\n            detailInfo: {},\n            visible: false,\n            dataSource:[]\n        }\n    };\n    // shouldComponentUpdate(nextProps, nextState) {\n    //     console.log(nextProps, nextState)\n    //     return nextState.someData !== this.state.someData\n    //   }\n    getData(currentPage) {\n        // if (!this.state.project) {\n        //     message.error('项目必须选择');\n        //     return\n        // }\n        this.setState({ loading: true })\n        let es_index = \"aiologs\"  //定位es的索引\n        if (this.state.beginTime && this.state.endTime) {\n            // 如果选择了时间，则根据时间定位默认查询一个月内的数据\n            const begin = new Date(this.state.beginTime)\n            const endTime = new Date(this.state.endTime)\n            if (begin.getFullYear() === endTime.getFullYear()) {\n                es_index += `-${begin.getFullYear()}.`\n                if (begin.getMonth() === endTime.getMonth()) {\n                    const ss = String(begin.getMonth() + 1)\n                    es_index += `${ss.length > 1 ? ss : (\"0\" + ss)}.`\n                    if (begin.getDate() === endTime.getDate()) {\n                        const dd = String(begin.getDate())\n                        es_index += `${dd.length > 1 ? dd : (\"0\" + dd)}`\n                    }\n                    else {\n                        es_index += '*'\n                    }\n                } else {\n                    es_index += '*'\n                }\n            } else {\n                es_index += '*'\n            }\n        }\n        else if (this.state.beginTime) {\n            const ss = String(this.state.beginTime.getMonth() + 1)\n            const dd = String(this.state.beginTime.getDate())\n            es_index += `-${this.state.beginTime.getFullYear()}.${ss.length > 1 ? ss : (\"0\" + ss)}.${dd.length > 1 ? dd : (\"0\" + dd)}`\n        }\n        else if (this.state.endTime) {\n            const ss = String(this.state.endTime.getMonth() + 1)\n            const dd = String(this.state.endTime.getDate())\n            es_index += `-${this.state.endTime.getFullYear()}.${ss.length > 1 ? ss : (\"0\" + ss)}.${dd.length > 1 ? dd : (\"0\" + dd)}`\n        }\n        else {\n            es_index += '*'\n        }\n        if (!currentPage) {\n            currentPage = 1\n        }\n        const req = {\n            \"size\": 10,\n            \"from\": (currentPage - 1) * 10,\n            \"sort\": [\n                {\n                    \"addtime\": {\n                        \"order\": \"desc\"\n                    },\n                    \"_id\": {\n                        \"order\": \"desc\"\n                    }\n                }\n            ]\n        }\n        //分页\n\n        // if (this.state.affterTime || this.state.es_id) {\n        //     req.search_after = []\n        //     if (this.state.affterTime) {\n        //         req.search_after.push(this.state.affterTime)\n        //     }\n        //     if (this.state.es_id) {\n        //         req.search_after.push(this.state.es_id)\n        //     }\n        // }\n        let range = undefined\n        // 时间范围减少\n        if (this.state.beginTime || this.state.endTime) {\n            range = { \"addtime\": {} }\n            if (this.state.beginTime) {\n                range.addtime.gte = this.state.beginTime\n            }\n            if (this.state.endTime) {\n                range.addtime.lte = this.state.endTime\n            }\n        }\n        // 项目\n        let term = []\n        if (this.state.project) {\n            term.push({\n                \"project\": this.state.project\n            })\n        }\n        if (this.state.env) {\n            term.push({\n                \"env\": this.state.env\n            })\n        }\n        if (this.state.module) {\n            term.push({\n                \"module\": this.state.module\n            })\n        }\n        if (this.state.category) {\n            term.push({\n                \"category\": this.state.category\n            })\n        }\n        if (this.state.sub_category) {\n            term.push({\n                \"sub_category\": this.state.sub_category\n            })\n        }\n        if (this.state.logLevel) {\n            term.push({\n                \"logLevel\": this.state.logLevel\n            })\n        }\n        if (this.state.filter1) {\n            term.push({\n                \"filter1\": this.state.filter1\n            })\n        }\n        if (this.state.filter2) {\n            term.push({\n                \"filter2\": this.state.filter2\n            })\n        }\n        if (this.state.ip&&this.state.ip.length>0) {\n            this.state.ip.forEach(element => term.push({\n                \"ip\": element\n            }));\n        }\n        if (term.length > 0 || range) {\n            req.query = { \"bool\": { \"filter\": [] } }\n            if (term.length === 1) {\n                req.query.bool.filter.push({ \"term\": term[0] })\n            }\n            else if (term.length > 0) {\n                term.forEach(m=>req.query.bool.filter.push({ \"term\": m }))\n            }\n            if (range) {\n                req.query.bool.filter.push({ \"range\": range })\n            }\n        }\n        reqwest({\n            url: `/${es_index}/_search/`,\n            method: 'post',\n            data: JSON.stringify(req),\n            type: 'json',\n            contentType: 'application/json'\n        }).then(data => {\n            if (data.hits) {\n                if (data.hits.hits && data.hits.hits.length > 0) {\n                    const pager = { ...this.state.pagination };\n                    pager.total = data.hits.total.value;\n                    this.setState({\n                        dataSource: data.hits.hits,\n                        pagination: pager,\n                        loading: false\n                    })\n                } else {\n                    message.warning('查询不到数据');\n                    this.setState({\n                        loading: false\n                    })\n                }\n            } else {\n                message.warning('查询不到数据');\n                this.setState({\n                    loading: false\n                })\n            }\n        }).catch(() => {\n            message.error('接口跪了~~~~(>_<)~~~~');\n            this.setState({\n                loading: false\n            })\n        });\n    };\n    bookTitle() {\n        return [\n            {\n                title: '项目标识',\n                dataIndex: '_source.project',\n                key: '_source.project',\n                width: \"8%\",\n                render: (text, record) => <Button type=\"link\" onClick={() => this.openrDetail(record)}>{text}</Button>,\n            },\n            {\n                title: '模块',\n                dataIndex: '_source.module',\n                key: '_source.module',\n                width: \"8%\",\n            },\n            {\n                title: '分类',\n                dataIndex: '_source.category',\n                key: '_source.category',\n                width: \"8%\",\n            },\n            {\n                title: '子分类',\n                dataIndex: '_source.sub_category',\n                key: '_source.sub_category',\n                width: \"8%\",\n            },\n            {\n                title: '日志内容',\n                dataIndex: '_source.msg',\n                key: '_source.msg',\n                render: m => typeof m == 'string' ? m : JSON.stringify(m).slice(0, 60)\n            },\n            {\n                title: '过滤',\n                dataIndex: '_source.filter1',\n                key: '_source.filter1',\n                width: \"10%\",\n                render: (filter1, record) =>\n                    (<div>\n                        <div>{filter1}</div>\n                        <div>{record._source.filter2}</div>\n                    </div>),\n            },\n            {\n                title: '时间',\n                dataIndex: '_source.addtime',\n                key: '_source.addtime',\n                width: \"10%\",\n                render: (addtime, record) =>\n                    (<div>{dateFormat(\"YYYY-mm-dd HH:MM:SS\", new Date(addtime))}</div>),\n            },\n            {\n                title: 'ip',\n                dataIndex: '_source.ip',\n                key: '_source.ip',\n                width: \"8%\",\n            },\n            {\n                title: '日志等级',\n                dataIndex: '_source.logLevel',\n                key: '_source.logLevel',\n                width: \"10%\",\n                render: (tag) => (\n                    <span>\n                        {(tag => {\n                            let color = 'green';\n                            switch (tag) {\n                                case \"INFO\":\n                                    color = 'blue'\n                                    break;\n                                case \"WARNING\":\n                                    color = 'orange'\n                                    break;\n                                case \"ERROR\":\n                                    color = 'red'\n                                    break;\n                                case \"CRITICAL\":\n                                    color = 'purple'\n                                    break;\n                                case \"DEBUG\":\n                                    color = 'gray'\n                                    break;\n                                default:\n                                    break;\n                            }\n                            return (\n                                <Tag color={color} key={tag}>\n                                    {tag}\n                                </Tag>\n                            );\n                        })(tag)}\n                    </span>\n                ),\n            },\n            {\n                title: '操作',\n                // key: 'logLevel',\n                width: \"10%\",\n                render: (text, record) => (\n                    <span>\n                        <Button type=\"link\" onClick={() => this.openrDetail(record)}>查看详情</Button>\n                    </span>\n                ),\n            },\n        ];\n    };\n    openrDetail(detailInfo) {\n        this.setState(\n            {\n                detailInfo: detailInfo,\n                visible: true\n            }\n        )\n    };\n    handleCancel = e => {\n        console.log(e);\n        this.setState({\n            visible: false,\n        });\n    };\n    handleTableChange = (pagination, filters, sorter) => {\n        console.log(pagination)\n        const pager = { ...this.state.pagination };\n        pager.current = pagination.current;\n        this.setState({\n            pagination: pager,\n        });\n        this.getData(pager.current);\n    };\n    bindDetail(detailInfo) {\n        if (!detailInfo || !detailInfo._source) {\n            return null\n        }\n        return (\n            <Descriptions title={null} bordered>\n                <Descriptions.Item label=\"项目标识\">{detailInfo._source.project}</Descriptions.Item>\n                <Descriptions.Item label=\"环境\">{detailInfo._source.env}</Descriptions.Item>\n                <Descriptions.Item label=\"日志等级\">{detailInfo._source.logLevel}</Descriptions.Item>\n                <Descriptions.Item label=\"模块\">{detailInfo._source.module}</Descriptions.Item>\n                <Descriptions.Item label=\"分类\">{detailInfo._source.category}</Descriptions.Item>\n                <Descriptions.Item label=\"子分类\">{detailInfo._source.sub_category}</Descriptions.Item>\n                <Descriptions.Item label=\"ip地址\">{detailInfo._source.ip}</Descriptions.Item>\n                <Descriptions.Item label=\"记录时间\" span={2}>{detailInfo._source.addtime}</Descriptions.Item>\n                <Descriptions.Item label=\"过滤条件1\">{detailInfo._source.filter1}</Descriptions.Item>\n                <Descriptions.Item label=\"过滤条件2\" span={2}>{detailInfo._source.filter2}</Descriptions.Item>\n                <Descriptions.Item label=\"日志内容\" span={3}>\n                    {typeof detailInfo._source.msg == 'string' ? detailInfo._source.msg : JSON.stringify(detailInfo._source.msg, null, 4)}\n                </Descriptions.Item>\n                <Descriptions.Item label=\"扩展信息\" span={3}>\n                    {typeof detailInfo._source.msg == 'string' ? detailInfo._source.extra : JSON.stringify(detailInfo._source.extra, null, 4)}\n                </Descriptions.Item>\n            </Descriptions>\n        )\n    }\n    componentDidMount() {\n        this.getData();\n    };\n    render() {\n        const dataSource = this.state.dataSource\n        const columns = this.bookTitle()\n        const bordered = true\n        const detailInfo = this.state.detailInfo\n        return (<div><Table columns={columns} dataSource={dataSource} bordered={bordered} rowKey={record => record._id}\n            pagination={this.state.pagination}\n            loading={this.state.loading}\n            onChange={this.handleTableChange} />\n            <Modal\n                title=\"日志详情\"\n                visible={this.state.visible}\n                onCancel={this.handleCancel}\n                footer={null}\n                width=\"60%\"\n            >\n                {this.bindDetail(detailInfo)}\n            </Modal></div>)\n    };\n}\nexport default LogsTable\n","import React, { Component } from 'react';\nimport { Form } from 'antd';\nimport AdvancedSearchForm from './AdvancedSearchForm'\nimport LogsTable from './LogsTable'\nimport './App.css';\n\n\nconst WrappedAdvancedSearchForm = Form.create({ name: 'advanced_search' })(AdvancedSearchForm);\nclass App extends Component {\n  state = {\n    searchSql: {\n      project: \"\",\n      env: \"\",\n      module: \"\",\n      category: \"\",\n      sub_category: \"\",\n      logLevel: \"\",\n      filter1: \"\",\n      filter2: \"\",\n      ip: \"\",\n      beginTime: null,\n      endTime: null,\n    },\n    searchKey:0\n  }\n  onSearchChange(v,n) {\n    let searchKey=this.state.searchKey\n    if(n){\n      searchKey++\n    }\n    this.setState({\n      searchSql: v,\n      searchKey\n    })\n  }\n  render() {\n    console.log(\"app render\")\n    const {searchSql,searchKey} = this.state\n    console.log(searchSql)\n    return (\n      <div className=\"App\">\n        <WrappedAdvancedSearchForm onChange={(v,n) => this.onSearchChange(v,n)} key={searchKey} />\n        <div className=\"TableShow\" ><LogsTable dataSource={searchSql} key={Math.ceil(Math.random()*1000)}/></div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}